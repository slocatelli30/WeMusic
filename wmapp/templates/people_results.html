{% extends "base_generic.html" %}

{% block content %}
<!-- Titolo -->
<h1>Cerca persone che potresti conoscere</h1>

<!-- form cerca ordinaryuser -->
<nav class="navbar">
    <div class="container-fluid">
        <form class="d-flex" action="{% url 'people_results' %}" method="post">
            {% csrf_token %}
            {{ form }}
            <!-- bottone cerca persona -->
            <input class="btn btn-primary" type="submit" value="Cerca persona">
        </form>
    </div>
</nav>
<!-- fine form cerca ordinaryuser -->

<!-- visualizza i risultati della ricerca in una tabella -->
<!-- se la lista degli utenti ricercati contiene almeno un valore, viene mostrata la tabella, altrimenti nulla -->
{% if ordinaryuser %}
<div class="container mb-5">
    <div class="row">
        {% for res in ordinaryuser %}
            <div class="col-sm-4 mb-3 mb-sm-2">
                <!-- card -->
                <div class="card" style="width: 18rem;">
                    <!-- img utente -->
                    <img src="../../static/profiles/{{res.account.name}}_{{res.account.surname}}.jpg" class="card-img-top" alt="img jpg non trovata">
                    <!-- body card per info utente -->
                    <div class="card-body">
                        <h5 class="card-title"><b>{{res.account.name}} {{res.account.surname}}</b></h5>
                        <p class="card-text">Ciao! Sono <i>{{res.account.name}} {{res.account.surname}}</i>, il mio id è <i>{{res.account.id}}</i> e la mia email è <i>{{res.account.email}}</i></p>
                        <!-- add or remove friend -->
                        <!-- se l'utente res è nella lista degli amici, verrà mostrato il pulsante remove -->
                        {% if res in ordinaryuser_current_list_friends %}
                            <a href="{% url 'remove_friends' res.id %}" class="btn btn-danger"><img src="../../static/icons/user-minus-solid.svg" style="width: 17px;" alt="user-minus-solid.svg not found"></a>
                        {% else %}
                        <!-- altrimenti, verrà mostrato il pulsante add -->
                            <a href="{% url 'add_friends' res.id %}" class="btn btn-success"><b>Aggiungi</b></a>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endif %}
<!-- fine tabella per i risultati degli ordinary user cercati -->

{% endblock %}